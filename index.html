<!--
[JST 2026-01-03 17:00]  milk_bottle_game_ui_design.html
目的: スマホ向けUIデザイン（画像なし / 牛乳瓶が右→中央で停止 / ボタンで上から牛乳が出る見た目）
※ これは「デザイン先行版（UIモック）」です。ゲームの判定ロジックは最小限のデモに留めています。
-->
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>牛乳瓶ゲーム（UIデザイン）</title>
  <style>
    /* [01] ベース */
    :root{
      --bg: #0f1220;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.10);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.65);
      --line: rgba(255,255,255,0.22);
      --accent: rgba(120, 170, 255, 0.95);
      --danger: rgba(255, 90, 120, 0.95);
      --milk: rgba(245, 245, 245, 0.95);

      --safe-area-top: env(safe-area-inset-top, 0px);
      --safe-area-bottom: env(safe-area-inset-bottom, 0px);

      /* スマホでの見た目調整 */
      --ui-radius: 16px;
      --btn-radius: 18px;
      --shadow: 0 16px 50px rgba(0,0,0,0.35);
    }

    html, body{
      height: 100%;
      margin: 0;
      background: radial-gradient(1200px 700px at 20% 10%, rgba(90,120,255,0.15), transparent 55%),
                  radial-gradient(900px 600px at 90% 25%, rgba(255,90,120,0.10), transparent 55%),
                  var(--bg);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic", sans-serif;
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior: none;
    }

    /* [02] 画面レイアウト（上:状態 / 中:プレイフィールド / 下:操作） */
    .app{
      height: 100%;
      display: grid;
      grid-template-rows: auto 1fr auto;
      padding-top: calc(10px + var(--safe-area-top));
      padding-bottom: calc(10px + var(--safe-area-bottom));
      gap: 10px;
    }

    .topbar{
      margin: 0 12px;
      padding: 12px 12px;
      border-radius: var(--ui-radius);
      background: linear-gradient(180deg, var(--panel2), var(--panel));
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,0.08);
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 12px;
    }
    .title{
      line-height: 1.2;
    }
    .title .main{
      font-weight: 700;
      letter-spacing: 0.2px;
      font-size: 16px;
    }
    .title .sub{
      margin-top: 4px;
      font-size: 12px;
      color: var(--muted);
    }

    .stat{
      display: grid;
      gap: 6px;
      text-align: right;
      font-variant-numeric: tabular-nums;
    }
    .stat .label{
      font-size: 11px;
      color: var(--muted);
    }
    .stat .value{
      font-size: 14px;
      font-weight: 700;
    }

    /* [03] プレイフィールド（中央に瓶が止まる） */
    .field{
      margin: 0 12px;
      border-radius: var(--ui-radius);
      background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
      min-height: 380px;
    }

    /* 上部中央: 牛乳の出口（ノズル） */
    .nozzle-wrap{
      position: absolute;
      left: 50%;
      top: 14px;
      transform: translateX(-50%);
      display: grid;
      justify-items: center;
      gap: 8px;
      z-index: 5;
      pointer-events: none; /* 見た目だけ */
    }
    .nozzle{
      width: 70px;
      height: 22px;
      border-radius: 999px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.18);
      position: relative;
    }
    .nozzle:before{
      content:"";
      position:absolute;
      left: 50%;
      top: 100%;
      transform: translateX(-50%);
      width: 18px;
      height: 10px;
      border-radius: 0 0 10px 10px;
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.18);
      border-top: none;
    }
    .hint{
      font-size: 11px;
      color: var(--muted);
      background: rgba(0,0,0,0.22);
      border: 1px solid rgba(255,255,255,0.10);
      padding: 6px 10px;
      border-radius: 999px;
    }

    /* 牛乳の流れ（ボタン押下で表示される想定） */
    .milk-stream{
      position: absolute;
      left: 50%;
      top: 46px;
      transform: translateX(-50%);
      width: 16px;
      height: 0px; /* JSで伸ばす */
      background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.70));
      border-radius: 999px;
      filter: drop-shadow(0 10px 18px rgba(255,255,255,0.08));
      opacity: 0;
      z-index: 4;
    }

    /* [04] 牛乳瓶（画像無し: CSSで瓶を描く） */
    .bottle{
      position: absolute;
      top: 120px;
      /* left はJSで動かす（右→中央） */
      width: min(180px, 52vw);
      height: min(320px, 58vh);
      z-index: 3;
      transform: translateX(-50%);
      pointer-events: none;
    }

    .bottle-outline{
      position: absolute;
      inset: 0;
      border-radius: 26px 26px 30px 30px;
      border: 2px solid rgba(255,255,255,0.55);
      background: rgba(255,255,255,0.05);
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,0.10),
        0 20px 40px rgba(0,0,0,0.30);
      overflow: hidden;
    }

    /* 首（ネック） */
    .bottle-neck{
      position: absolute;
      left: 50%;
      top: -26px;
      transform: translateX(-50%);
      width: 46%;
      height: 58px;
      border-radius: 18px 18px 16px 16px;
      border: 2px solid rgba(255,255,255,0.55);
      background: rgba(255,255,255,0.04);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.10);
    }

    /* 口（開口） */
    .bottle-mouth{
      position: absolute;
      left: 50%;
      top: -36px;
      transform: translateX(-50%);
      width: 56%;
      height: 18px;
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,0.55);
      background: rgba(0,0,0,0.25);
    }

    /* 中身（牛乳の充填レベル） */
    .milk-fill{
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 0%; /* JSで増減（デザインモックでは表示可能） */
      background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(240,240,240,0.80));
    }
    .milk-fill:before{
      /* ミルク表面のゆらぎ（見た目） */
      content:"";
      position:absolute;
      left:-20%;
      top:-8px;
      width:140%;
      height: 18px;
      border-radius: 999px;
      background: rgba(255,255,255,0.55);
      filter: blur(2px);
      opacity: 0.55;
    }

    /* 目標ライン: 90% */
    .target-line{
      position: absolute;
      left: 0;
      right: 0;
      bottom: 90%;
      border-top: 2px dashed rgba(120,170,255,0.9);
      opacity: 0.95;
    }
    .target-label{
      position: absolute;
      right: 10px;
      bottom: calc(90% + 6px);
      font-size: 11px;
      color: rgba(120,170,255,0.95);
      background: rgba(0,0,0,0.22);
      border: 1px solid rgba(120,170,255,0.30);
      padding: 4px 8px;
      border-radius: 999px;
    }

    /* オーバーフロー演出（文字だけで表現） */
    .overflow{
      position: absolute;
      left: 50%;
      top: 66px;
      transform: translateX(-50%);
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,90,120,0.14);
      border: 1px solid rgba(255,90,120,0.35);
      color: rgba(255,200,210,0.98);
      font-weight: 700;
      letter-spacing: 0.4px;
      opacity: 0;
      z-index: 6;
    }
    .overflow.show{
      animation: pop 900ms ease-out forwards;
    }
    @keyframes pop{
      0%{ opacity:0; transform: translateX(-50%) translateY(6px) scale(0.98); }
      25%{ opacity:1; transform: translateX(-50%) translateY(0px) scale(1.02); }
      100%{ opacity:0; transform: translateX(-50%) translateY(-10px) scale(1.00); }
    }

    /* 成功演出（デザイン枠） */
    .success{
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      background: rgba(0,0,0,0.40);
      opacity: 0;
      pointer-events: none;
      z-index: 10;
    }
    .success.show{
      opacity: 1;
    }
    .success-card{
      width: min(320px, 86%);
      border-radius: 18px;
      padding: 18px 16px;
      background: linear-gradient(180deg, rgba(120,170,255,0.20), rgba(255,255,255,0.06));
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow: 0 30px 90px rgba(0,0,0,0.55);
      text-align: center;
    }
    .success-card .big{
      font-size: 18px;
      font-weight: 800;
      letter-spacing: 0.6px;
      margin-bottom: 6px;
    }
    .success-card .small{
      font-size: 12px;
      color: var(--muted);
    }

    /* [05] 下部コントロール */
    .controls{
      margin: 0 12px;
      padding: 12px;
      border-radius: var(--ui-radius);
      background: linear-gradient(180deg, var(--panel2), var(--panel));
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,0.08);
      display: grid;
      gap: 10px;
    }

    .btn{
      width: 100%;
      border: none;
      border-radius: var(--btn-radius);
      padding: 16px 14px;
      font-size: 18px;
      font-weight: 800;
      letter-spacing: 0.4px;
      color: rgba(255,255,255,0.95);
      background: linear-gradient(180deg, rgba(120,170,255,0.95), rgba(80,120,255,0.80));
      box-shadow: 0 14px 30px rgba(80,120,255,0.20);
      cursor: pointer;
    }
    .btn:active{
      transform: translateY(1px);
      filter: brightness(0.98);
    }

    .row{
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: center;
    }
    .chip{
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,0.18);
      border: 1px solid rgba(255,255,255,0.10);
      color: var(--muted);
      font-size: 12px;
    }
    .mini{
      border: none;
      border-radius: 999px;
      padding: 10px 12px;
      background: rgba(255,255,255,0.10);
      color: rgba(255,255,255,0.90);
      font-weight: 700;
      cursor: pointer;
    }
    .mini:active{
      transform: translateY(1px);
      filter: brightness(0.98);
    }

    /* [06] 小さな画面向け */
    @media (max-height: 700px){
      .field{ min-height: 340px; }
      .bottle{ top: 108px; }
    }
  </style>
</head>

<body>
  <div class="app">

    <!-- [A] 上部: 状態表示（デザイン用） -->
    <header class="topbar" aria-label="ゲーム状態">
      <div class="title">
        <div class="main">牛乳瓶チャレンジ（UIデザイン）</div>
        <div class="sub">右→中央で瓶が停止 / ボタンで上から牛乳（見た目）</div>
      </div>
      <div class="stat">
        <div class="label">充填率（デモ）</div>
        <div class="value" id="fillText">0%</div>
      </div>
    </header>

    <!-- [B] 中央: プレイフィールド -->
    <main class="field" aria-label="プレイフィールド">

      <!-- ノズル（上部中央） -->
      <div class="nozzle-wrap">
        <div class="nozzle" aria-hidden="true"></div>
        <div class="hint">下のボタンで注ぐ（デザインモック）</div>
      </div>

      <!-- 牛乳の流れ -->
      <div class="milk-stream" id="milkStream" aria-hidden="true"></div>

      <!-- オーバーフロー表示 -->
      <div class="overflow" id="overflowText">あふれた！</div>

      <!-- 成功カード（デザイン枠） -->
      <div class="success" id="successOverlay" aria-hidden="true">
        <div class="success-card">
          <div class="big">成功（デザイン表示）</div>
          <div class="small">90%ぴったり付近に入れば成功、は次で判定します。</div>
        </div>
      </div>

      <!-- 牛乳瓶本体（右から入って中央で止まる） -->
      <div class="bottle" id="bottle" aria-hidden="true">
        <div class="bottle-mouth"></div>
        <div class="bottle-neck"></div>
        <div class="bottle-outline">
          <div class="milk-fill" id="milkFill"></div>
          <div class="target-line"></div>
          <div class="target-label">目標 90%</div>
        </div>
      </div>

    </main>

    <!-- [C] 下部: 操作 -->
    <footer class="controls" aria-label="操作パネル">
      <button class="btn" id="pourBtn">注ぐ</button>

      <div class="row">
        <div class="chip">デザイン版: 瓶移動・注ぐ見た目のみ</div>
        <button class="mini" id="resetBtn">リセット</button>
      </div>
    </footer>

  </div>

  <script>
    /*
      [JS-01] これはUIモック用の最小JSです。
      - 瓶: 右から中央へ移動して停止
      - ボタン: 牛乳の流れ表示 + 充填量が少し増える（デザイン確認用）
      ※ 「90%に入れば成功」「多いと溢れる」の厳密判定ロジックは次のステップで実装します。
    */

    // [JS-02] DOM参照
    var bottleEl = document.getElementById("bottle");
    var milkFillEl = document.getElementById("milkFill");
    var fillTextEl = document.getElementById("fillText");
    var milkStreamEl = document.getElementById("milkStream");
    var overflowEl = document.getElementById("overflowText");
    var successOverlayEl = document.getElementById("successOverlay");

    var pourBtn = document.getElementById("pourBtn");
    var resetBtn = document.getElementById("resetBtn");

    // [JS-03] 状態（デモ）
    var fill = 0;            // 0〜110（110は溢れ演出のために少し超える）
    var isPouring = false;

    // [JS-04] 瓶の初期位置（右外）→中央停止
    function placeBottleAtPercentX(pxPercent){
      // field内でのleftを%指定（transform: translateX(-50%)なので中心基準）
      bottleEl.style.left = pxPercent + "%";
    }

    function animateBottleIn(){
      // 右外（120%）→中央（50%）へ
      var x = 120;
      placeBottleAtPercentX(x);

      function step(){
        // 速度はデザイン確認向けに一定
        x -= 2.6;
        if (x <= 50){
          x = 50;
          placeBottleAtPercentX(x);
          return; // 停止
        }
        placeBottleAtPercentX(x);
        requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }

    // [JS-05] 充填表示（デモ）
    function renderFill(){
      // 見た目は 0〜100%に丸める（溢れ判定表示のため内部fillは超える）
      var visual = Math.max(0, Math.min(100, fill));
      milkFillEl.style.height = visual + "%";
      fillTextEl.textContent = visual + "%";
    }

    // [JS-06] 流れ表示（見た目）
    function showStream(on){
      if (on){
        milkStreamEl.style.opacity = "1";
        // 瓶の口まで伸ばす（フィールド上部→瓶の上あたり）
        milkStreamEl.style.height = "210px";
      } else {
        milkStreamEl.style.opacity = "0";
        milkStreamEl.style.height = "0px";
      }
    }

    // [JS-07] 溢れ演出（見た目）
    function showOverflow(){
      overflowEl.className = "overflow show";
      // classを戻す（再発火できるように）
      setTimeout(function(){
        overflowEl.className = "overflow";
      }, 950);
    }

    // [JS-08] 成功表示（デザイン枠）
    function showSuccessOverlay(on){
      if (on){
        successOverlayEl.className = "success show";
        successOverlayEl.setAttribute("aria-hidden", "false");
      } else {
        successOverlayEl.className = "success";
        successOverlayEl.setAttribute("aria-hidden", "true");
      }
    }

    // [JS-09] 注ぐ（デザインデモ）
    function pourOnce(){
      if (isPouring) return;
      isPouring = true;

      showStream(true);

      // デザイン確認用: 1回押すと少し増える
      // 次ステップで「押しっぱなし」「流量」「停止タイミング」などに拡張可能
      var add = 12; // 仮
      fill += add;

      // 溢れ（デザイン）
      if (fill > 100){
        showOverflow();
      }

      // 「成功」デザイン表示（仮）: 90%以上〜100%未満で出す（次で厳密化）
      if (fill >= 90 && fill <= 100){
        showSuccessOverlay(true);
        // しばらく表示して消す
        setTimeout(function(){ showSuccessOverlay(false); }, 900);
      }

      renderFill();

      // 流れ停止（見た目）
      setTimeout(function(){
        showStream(false);
        isPouring = false;
      }, 260);
    }

    // [JS-10] リセット
    function resetAll(){
      fill = 0;
      renderFill();
      showStream(false);
      showSuccessOverlay(false);
      placeBottleAtPercentX(120);
      animateBottleIn();
    }

    // [JS-11] イベント
    pourBtn.addEventListener("click", pourOnce);
    resetBtn.addEventListener("click", resetAll);

    // [JS-12] 初期化
    renderFill();
    animateBottleIn();
  </script>
</body>
</html>