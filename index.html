<!--
[JST 2026-01-07 17:00]  kanji_quiz_150q_big_3row_10q_v2.html
漢字よみクイズ（落下なし / 150問からランダム10問 / 重複なし / 答え3行）
追加変更:
  - 不正解時に「正解: ○○」を表示
  - 終了/開始オーバーレイは半透明を廃止し、背景を完全不透明（背面を見せない）
-->
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>漢字よみクイズ（10問・3行）</title>
  <style>
    :root{
      --bg:#16233a;
      --panel:rgba(255,255,255,0.08);
      --panel2:rgba(255,255,255,0.14);
      --text:rgba(255,255,255,0.95);
      --muted:rgba(255,255,255,0.78);
      --shadow: 0 18px 55px rgba(0,0,0,0.35);
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --radius:18px;
      --btnRadius:20px;
    }

    html, body{
      height:100%;
      margin:0;
      background:
        radial-gradient(1000px 600px at 20% 10%, rgba(120,170,255,0.22), transparent 55%),
        radial-gradient(900px 600px at 90% 25%, rgba(255,90,120,0.18), transparent 55%),
        var(--bg);
      color:var(--text);
      font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic", sans-serif;
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior: none;
      user-select:none;
    }

    .app{
      height:100%;
      display:grid;
      grid-template-rows: auto 1fr auto;
      gap:12px;
      padding-top: calc(12px + var(--safe-top));
      padding-bottom: calc(12px + var(--safe-bottom));
    }

    /* HUD */
    .hud{
      margin:0 12px;
      padding:14px 14px;
      border-radius: var(--radius);
      background: linear-gradient(180deg, var(--panel2), var(--panel));
      border:1px solid rgba(255,255,255,0.08);
      box-shadow: var(--shadow);
      display:grid;
      grid-template-columns: 1fr auto;
      align-items:center;
      gap:12px;
    }
    .hudLeft .title{
      font-size:18px;
      font-weight:900;
      letter-spacing:0.3px;
      line-height:1.2;
    }
    .hudLeft .sub{
      margin-top:6px;
      font-size:13px;
      color:var(--muted);
      line-height:1.2;
    }
    .hudRight{
      display:grid;
      gap:8px;
      text-align:right;
      font-variant-numeric: tabular-nums;
    }
    .hudRight .row{
      font-size:13px;
      color:var(--muted);
    }
    .hudRight .row b{
      color:var(--text);
      font-size:18px;
      margin-left:10px;
      font-weight:900;
    }

    /* 問題パネル */
    .stage{
      margin:0 12px;
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
      border:1px solid rgba(255,255,255,0.08);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      display:grid;
      place-items:center;
      padding:18px 14px;
      min-height: 220px;
    }
    .qCard{
      width:min(560px, 100%);
      border-radius:18px;
      padding:18px 16px;
      background: rgba(0,0,0,0.20);
      border:1px solid rgba(255,255,255,0.16);
      box-shadow: 0 18px 40px rgba(0,0,0,0.28);
      text-align:center;
    }
    .qText{
      font-size:76px;   /* ★大きい */
      font-weight:900;
      letter-spacing:2px;
      line-height:1.0;
      white-space: nowrap;
    }
    .qHint{
      margin-top:10px;
      font-size:13px;
      color:var(--muted);
      letter-spacing:0.2px;
      line-height:1.5;
    }

    /* トースト */
    .toast{
      position:absolute;
      left:50%;
      top: 12px;
      transform: translateX(-50%);
      padding:11px 16px;
      border-radius:999px;
      background: rgba(0,0,0,0.24);
      border:1px solid rgba(255,255,255,0.12);
      color: var(--text);
      font-size:16px;
      font-weight:900;
      opacity:0;
      pointer-events:none;
      z-index: 10;
      white-space: nowrap;
      max-width: calc(100% - 24px);
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .toast.show{
      opacity:1;
      animation: toastFade 1900ms ease-out forwards;
    }
    .toast.ok{
      border-color: rgba(120,170,255,0.35);
      background: rgba(120,170,255,0.14);
    }
    .toast.ng{
      border-color: rgba(255,90,120,0.35);
      background: rgba(255,90,120,0.14);
    }
    @keyframes toastFade{
      0%{ transform: translateX(-50%) translateY(6px); opacity:0; }
      20%{ transform: translateX(-50%) translateY(0px); opacity:1; }
      100%{ transform: translateX(-50%) translateY(-10px); opacity:0; }
    }

    /* 下部：回答（★3行＝縦並び） */
    .choices{
      margin:0 12px;
      padding:12px;
      border-radius: var(--radius);
      background: linear-gradient(180deg, var(--panel2), var(--panel));
      border:1px solid rgba(255,255,255,0.08);
      box-shadow: var(--shadow);
      display:grid;
      gap:12px;
    }
    .choiceCol{
      display:grid;
      grid-template-columns: 1fr; /* ★1列＝3行 */
      gap:10px;
    }
    .choiceBtn{
      border:none;
      border-radius: var(--btnRadius);
      padding:18px 10px;
      background: rgba(255,255,255,0.10);
      border:1px solid rgba(255,255,255,0.12);
      color: var(--text);
      font-size:34px;   /* ★大きい */
      font-weight:900;
      cursor:pointer;
      box-shadow: 0 14px 30px rgba(0,0,0,0.18);

      /* ★長い読みでも見切れにくく */
      white-space: normal;
      line-height: 1.05;
      word-break: break-all;
      min-height: 74px;
      display:grid;
      place-items:center;
      text-align:center;
    }
    .choiceBtn:active{
      transform: translateY(1px);
      filter: brightness(0.98);
    }
    .choiceBtn.disabled{
      opacity: 0.55;
      cursor: default;
    }

    .smallRow{
      display:grid;
      grid-template-columns: 1fr auto auto;
      gap:10px;
      align-items:center;
    }
    .chip{
      font-size:13px;
      color:var(--muted);
      padding:11px 12px;
      border-radius:999px;
      background: rgba(0,0,0,0.18);
      border:1px solid rgba(255,255,255,0.10);
    }
    .miniBtn{
      border:none;
      border-radius:999px;
      padding:11px 13px;
      background: rgba(255,255,255,0.10);
      border:1px solid rgba(255,255,255,0.10);
      color: var(--text);
      font-weight:900;
      font-size:14px;
      cursor:pointer;
    }
    .miniBtn:active{ transform: translateY(1px); }

    /* overlay（★少し透けさせる：背面がほのかに見える） */
    .overlay{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      background: rgba(22,35,58,0.95);
      z-index: 20;
    }
    .overlayCard{
      width:min(380px, 90%);
      border-radius:18px;
      padding:18px 16px;
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
      border:1px solid rgba(255,255,255,0.14);
      box-shadow: 0 30px 90px rgba(0,0,0,0.55);
      text-align:center;
    }
    .overlayCard .big{
      font-size:20px;
      font-weight:900;
      letter-spacing:0.4px;
      margin-bottom:8px;
    }
    .overlayCard .desc{
      font-size:13px;
      color:var(--muted);
      line-height:1.7;
      margin-bottom:14px;
    }
    .startBtn{
      width:100%;
      border:none;
      border-radius: 16px;
      padding:15px 12px;
      font-size:17px;
      font-weight:900;
      color: var(--text);
      background: linear-gradient(180deg, rgba(120,170,255,0.95), rgba(80,120,255,0.82));
      box-shadow: 0 16px 34px rgba(80,120,255,0.22);
      cursor:pointer;
    }
    .startBtn:active{ transform: translateY(1px); }

    /* 小さい画面向け微調整 */
    @media (max-width: 375px){
      .qText{ font-size:66px; }
      .choiceBtn{ font-size:30px; min-height:70px; }
    }
    @media (max-height: 740px){
      .stage{ min-height: 200px; }
      .qText{ font-size:62px; }
      .choiceBtn{ min-height:68px; }
    }
  </style>
</head>

<body>
  <div class="app">
    <header class="hud">
      <div class="hudLeft">
        <div class="title">漢字よみクイズ（ランダム10問）</div>
        <div class="sub">落下なし / 答え3行 / 150問から抽出（重複なし）</div>
      </div>
      <div class="hudRight">
        <div class="row">SCORE<b id="scoreTxt">0</b></div>
        <div class="row">STREAK<b id="streakTxt">0</b></div>
        <div class="row">LIFE<b id="lifeTxt">3</b></div>
        <div class="row">PROG<b id="progTxt">0/10</b></div>
      </div>
    </header>

    <main class="stage" id="stage">
      <div class="toast" id="toast"></div>

      <div class="qCard">
        <div class="qText" id="qText">　</div>
        <div class="qHint" id="qHint">下の3つ（縦）から正しい「よみ」をタップ</div>
      </div>

      <div class="overlay" id="overlay">
        <div class="overlayCard">
          <div class="big" id="overlayTitle">スタート</div>
          <div class="desc" id="overlayDesc">
            150問の中からランダムに10問を選んで出題します（10問内は重複しません）。<br/>
            正しい「よみ」をタップしてください（間違いでライフ-1）。
          </div>
          <button class="startBtn" id="startBtn">開始</button>
        </div>
      </div>
    </main>

    <footer class="choices">
      <div class="choiceCol">
        <button class="choiceBtn" id="c0">-</button>
        <button class="choiceBtn" id="c1">-</button>
        <button class="choiceBtn" id="c2">-</button>
      </div>
      <div class="smallRow">
        <div class="chip" id="statusChip">出題: ランダム10問</div>
        <button class="miniBtn" id="pauseBtn">一時停止</button>
        <button class="miniBtn" id="resetBtn">リセット</button>
      </div>
    </footer>
  </div>

  <script>
    /* =========================
       150問（前コードの問題を使用）
       ========================= */
    var QUESTIONS = [
// 中学校で学ぶ範囲の語彙（熟語中心）150問：{ display, correct, wrong } 形式
  { display: "旅行", correct: "りょこう", wrong: ["りょごう","りょうこう"] },
  { display: "希望", correct: "きぼう", wrong: ["きほう","きぼ"] },
  { display: "努力", correct: "どりょく", wrong: ["どりく","どりょう"] },
  { display: "必要", correct: "ひつよう", wrong: ["ひっよう","ひつやく"] },
  { display: "成功", correct: "せいこう", wrong: ["せいごう","しょうこう"] },

  { display: "失敗", correct: "しっぱい", wrong: ["しつぱい","しんぱい"] },
  { display: "準備", correct: "じゅんび", wrong: ["じゅんぴ","しゅんび"] },
  { display: "確認", correct: "かくにん", wrong: ["かくねん","かっくにん"] },
  { display: "計画", correct: "けいかく", wrong: ["けいがく","けいかつ"] },
  { display: "実行", correct: "じっこう", wrong: ["じつこう","じっごう"] },

  { display: "説明", correct: "せつめい", wrong: ["せつみょう","せいめい"] },
  { display: "記録", correct: "きろく", wrong: ["きろう","きろ"] },
  { display: "情報", correct: "じょうほう", wrong: ["じょうぼう","しょうほう"] },
  { display: "意見", correct: "いけん", wrong: ["いげん","いこん"] },
  { display: "判断", correct: "はんだん", wrong: ["はんたん","ばんだん"] },

  { display: "地理", correct: "ちり", wrong: ["じり","ちれい"] },
  { display: "歴史", correct: "れきし", wrong: ["れきじ","りきし"] },
  { display: "社会", correct: "しゃかい", wrong: ["じゃかい","しゃがい"] },
  { display: "理科", correct: "りか", wrong: ["りが","りけ"] },
  { display: "数学", correct: "すうがく", wrong: ["すうかく","すうごく"] },

  { display: "英語", correct: "えいご", wrong: ["えいこ","えいごう"] },
  { display: "国語", correct: "こくご", wrong: ["こくこ","こっご"] },
  { display: "美術", correct: "びじゅつ", wrong: ["びしゅつ","びじつ"] },
  { display: "音楽", correct: "おんがく", wrong: ["おんかく","おんごく"] },
  { display: "体育", correct: "たいいく", wrong: ["たいく","たいえく"] },

  { display: "学習", correct: "がくしゅう", wrong: ["がくしゅ","がくしょう"] },
  { display: "宿題", correct: "しゅくだい", wrong: ["しゅくたい","じゅくだい"] },
  { display: "授業", correct: "じゅぎょう", wrong: ["じゅきょう","しゅぎょう"] },
  { display: "試験", correct: "しけん", wrong: ["しげん","しかん"] },
  { display: "成績", correct: "せいせき", wrong: ["せいぜき","せいしゃく"] },

  { display: "出席", correct: "しゅっせき", wrong: ["しゅつせき","しっせき"] },
  { display: "欠席", correct: "けっせき", wrong: ["けつせき","けっしき"] },
  { display: "連絡", correct: "れんらく", wrong: ["れんりゃく","れんろく"] },
  { display: "相談", correct: "そうだん", wrong: ["そうたん","しょうだん"] },
  { display: "提出", correct: "ていしゅつ", wrong: ["ていしゅ","ていじゅつ"] },

  { display: "研究", correct: "けんきゅう", wrong: ["けんきょう","げんきゅう"] },
  { display: "発表", correct: "はっぴょう", wrong: ["はつひょう","はっびょう"] },
  { display: "発見", correct: "はっけん", wrong: ["はつけん","はっげん"] },
  { display: "観察", correct: "かんさつ", wrong: ["かんざつ","けんさつ"] },
  { display: "実験", correct: "じっけん", wrong: ["じつけん","しっけん"] },

  { display: "結果", correct: "けっか", wrong: ["けつか","けっが"] },
  { display: "原因", correct: "げんいん", wrong: ["げんえん","けんいん"] },
  { display: "理由", correct: "りゆう", wrong: ["りゆ","りよう"] },
  { display: "目的", correct: "もくてき", wrong: ["もくてい","ぼくてき"] },
  { display: "方法", correct: "ほうほう", wrong: ["ほうぼう","ほうぽう"] },

  { display: "比較", correct: "ひかく", wrong: ["びかく","ひがく"] },
  { display: "関係", correct: "かんけい", wrong: ["かんげい","かんけ"] },
  { display: "条件", correct: "じょうけん", wrong: ["じょけん","しょうけん"] },
  { display: "変化", correct: "へんか", wrong: ["へんが","べんか"] },
  { display: "増加", correct: "ぞうか", wrong: ["そうか","ぞうが"] },

  { display: "減少", correct: "げんしょう", wrong: ["げんじょう","けんしょう"] },
  { display: "特徴", correct: "とくちょう", wrong: ["とくじょう","どくちょう"] },
  { display: "重要", correct: "じゅうよう", wrong: ["しゅうよう","じゅよう"] },
  { display: "必要", correct: "ひつよう", wrong: ["ひっよう","ひつやく"] },
  { display: "大切", correct: "たいせつ", wrong: ["だいせつ","たいぜつ"] },

  { display: "適切", correct: "てきせつ", wrong: ["てきぜつ","できせつ"] },
  { display: "安全", correct: "あんぜん", wrong: ["あんせん","あんぜい"] },
  { display: "危険", correct: "きけん", wrong: ["ぎけん","きがん"] },
  { display: "注意", correct: "ちゅうい", wrong: ["ちゅい","ちょうい"] },
  { display: "確認", correct: "かくにん", wrong: ["かくねん","かっくにん"] },

  { display: "連続", correct: "れんぞく", wrong: ["れんそく","れんづく"] },
  { display: "継続", correct: "けいぞく", wrong: ["けいそく","けいづく"] },
  { display: "途中", correct: "とちゅう", wrong: ["とじゅう","どちゅう"] },
  { display: "開始", correct: "かいし", wrong: ["かいじ","がいし"] },
  { display: "終了", correct: "しゅうりょう", wrong: ["しゅりょう","しゅうよう"] },

  { display: "以上", correct: "いじょう", wrong: ["いしょう","いじょ"] },
  { display: "以下", correct: "いか", wrong: ["いが","いけ"] },
  { display: "全体", correct: "ぜんたい", wrong: ["ぜんだい","せんたい"] },
  { display: "部分", correct: "ぶぶん", wrong: ["ふぶん","ぶもん"] },
  { display: "中心", correct: "ちゅうしん", wrong: ["ちゅうじん","じゅうしん"] },

  { display: "周辺", correct: "しゅうへん", wrong: ["しゅへん","しゅうべん"] },
  { display: "方向", correct: "ほうこう", wrong: ["ほうごう","ぼうこう"] },
  { display: "位置", correct: "いち", wrong: ["いじ","いっち"] },
  { display: "範囲", correct: "はんい", wrong: ["はんえ","ばんい"] },
  { display: "規則", correct: "きそく", wrong: ["ぎそく","きぞく"] },

  { display: "法律", correct: "ほうりつ", wrong: ["ほうりち","ほうれつ"] },
  { display: "権利", correct: "けんり", wrong: ["げんり","けんりょ"] },
  { display: "義務", correct: "ぎむ", wrong: ["きむ","ぎぶ"] },
  { display: "責任", correct: "せきにん", wrong: ["せいにん","せきねん"] },
  { display: "自由", correct: "じゆう", wrong: ["しゆう","じよう"] },

  { display: "平等", correct: "びょうどう", wrong: ["ひょうどう","びょうとう"] },
  { display: "公平", correct: "こうへい", wrong: ["こうべい","こうへ"] },
  { display: "正義", correct: "せいぎ", wrong: ["せいき","しょうぎ"] },
  { display: "社会", correct: "しゃかい", wrong: ["じゃかい","しゃがい"] },
  { display: "政治", correct: "せいじ", wrong: ["せいし","しょうじ"] },

  { display: "経済", correct: "けいざい", wrong: ["けいさい","きょうざい"] },
  { display: "産業", correct: "さんぎょう", wrong: ["さんきょう","ざんぎょう"] },
  { display: "農業", correct: "のうぎょう", wrong: ["のうきょう","のうごう"] },
  { display: "工業", correct: "こうぎょう", wrong: ["こうきょう","こうごう"] },
  { display: "商業", correct: "しょうぎょう", wrong: ["しょうきょう","じょうぎょう"] },

  { display: "貿易", correct: "ぼうえき", wrong: ["ぼういき","ほうえき"] },
  { display: "資源", correct: "しげん", wrong: ["しけん","じげん"] },
  { display: "人口", correct: "じんこう", wrong: ["しんこう","じんごう"] },
  { display: "国際", correct: "こくさい", wrong: ["こくざい","こくせい"] },
  { display: "関係", correct: "かんけい", wrong: ["かんげい","かんけ"] },

  { display: "協力", correct: "きょうりょく", wrong: ["きょうりく","きょうろく"] },
  { display: "競争", correct: "きょうそう", wrong: ["けんそう","きょうぞう"] },
  { display: "戦争", correct: "せんそう", wrong: ["せんぞう","ぜんそう"] },
  { display: "平和", correct: "へいわ", wrong: ["へいば","へいが"] },
  { display: "条約", correct: "じょうやく", wrong: ["じょやく","しょうやく"] },

  { display: "文化", correct: "ぶんか", wrong: ["もんか","ぶんが"] },
  { display: "伝統", correct: "でんとう", wrong: ["てんとう","でんどう"] },
  { display: "宗教", correct: "しゅうきょう", wrong: ["しゅきょう","しゅうぎょう"] },
  { display: "芸術", correct: "げいじゅつ", wrong: ["けいじゅつ","げいじつ"] },
  { display: "文学", correct: "ぶんがく", wrong: ["もんがく","ぶんかく"] },

  { display: "表現", correct: "ひょうげん", wrong: ["ひょうけん","びょうげん"] },
  { display: "感想", correct: "かんそう", wrong: ["かんぞう","けんそう"] },
  { display: "意欲", correct: "いよく", wrong: ["いよ","いよう"] },
  { display: "集中", correct: "しゅうちゅう", wrong: ["しゅちゅう","しゅうじゅう"] },
  { display: "練習", correct: "れんしゅう", wrong: ["れんしょう","れんしゅ"] },

  { display: "反省", correct: "はんせい", wrong: ["はんしょう","ばんせい"] },
  { display: "改善", correct: "かいぜん", wrong: ["かいせん","かいざん"] },
  { display: "提案", correct: "ていあん", wrong: ["ていなん","たいあん"] },
  { display: "実現", correct: "じつげん", wrong: ["じっげん","じつけん"] },
  { display: "完成", correct: "かんせい", wrong: ["かんぜい","けんせい"] },

  { display: "希望", correct: "きぼう", wrong: ["きほう","きぼ"] },
  { display: "将来", correct: "しょうらい", wrong: ["しょうれい","そうらい"] },
  { display: "現在", correct: "げんざい", wrong: ["げんさい","けんざい"] },
  { display: "過去", correct: "かこ", wrong: ["がこ","かご"] },
  { display: "未来", correct: "みらい", wrong: ["みら","みらえ"] },

  { display: "成長", correct: "せいちょう", wrong: ["せいしょう","じょうちょう"] },
  { display: "発達", correct: "はったつ", wrong: ["はつたつ","はっだつ"] },
  { display: "進歩", correct: "しんぽ", wrong: ["しんぼ","じんぽ"] },
  { display: "後退", correct: "こうたい", wrong: ["こうだい","ごうたい"] },
  { display: "変化", correct: "へんか", wrong: ["へんが","べんか"] },

  { display: "記念", correct: "きねん", wrong: ["きれん","きめん"] },
  { display: "経験", correct: "けいけん", wrong: ["けいげん","けんけん"] },
  { display: "体験", correct: "たいけん", wrong: ["だいけん","たいげん"] },
  { display: "発言", correct: "はつげん", wrong: ["はっげん","はつけん"] },
  { display: "発表", correct: "はっぴょう", wrong: ["はつひょう","はっびょう"] },

  { display: "討論", correct: "とうろん", wrong: ["とうりん","どうろん"] },
  { display: "議論", correct: "ぎろん", wrong: ["きろん","ぎりん"] },
  { display: "意識", correct: "いしき", wrong: ["いじき","いせき"] },
  { display: "理解", correct: "りかい", wrong: ["りけい","りがい"] },
  { display: "納得", correct: "なっとく", wrong: ["なつとく","なっどく"] },

  { display: "知識", correct: "ちしき", wrong: ["じしき","ちせき"] },
  { display: "常識", correct: "じょうしき", wrong: ["じょしき","しょうしき"] },
  { display: "学問", correct: "がくもん", wrong: ["がくもん(促音)","がくぼん"] },
  { display: "問題", correct: "もんだい", wrong: ["もんたい","もんでい"] },
  { display: "解決", correct: "かいけつ", wrong: ["かいけち","がいけつ"] },

  { display: "分析", correct: "ぶんせき", wrong: ["もんせき","ぶんぜき"] },
  { display: "評価", correct: "ひょうか", wrong: ["ひょうが","びょうか"] },
  { display: "改善", correct: "かいぜん", wrong: ["かいせん","かいざん"] },
  { display: "発想", correct: "はっそう", wrong: ["はつそう","はっぞう"] },
  { display: "創造", correct: "そうぞう", wrong: ["そうそう","そうぞ"] },

  { display: "想像", correct: "そうぞう", wrong: ["そうそう","しょうぞう"] },
  { display: "表面", correct: "ひょうめん", wrong: ["ひょめん","びょうめん"] },
  { display: "内部", correct: "ないぶ", wrong: ["だいぶ","ないぼ"] },
  { display: "外部", correct: "がいぶ", wrong: ["かいぶ","がいぼ"] },
  { display: "内容", correct: "ないよう", wrong: ["だいよう","ないよ"] },

  { display: "全力", correct: "ぜんりょく", wrong: ["ぜんりく","せんりょく"] },
  { display: "協調", correct: "きょうちょう", wrong: ["きょうじょう","きょちょう"] },
  { display: "対立", correct: "たいりつ", wrong: ["だいりつ","たいれつ"] },
  { display: "合意", correct: "ごうい", wrong: ["こうい","ごい"] },
  { display: "同意", correct: "どうい", wrong: ["とうい","どうえ"] },

  { display: "選択", correct: "せんたく", wrong: ["せんだく","ぜんたく"] },
  { display: "決定", correct: "けってい", wrong: ["けつてい","けって"] },
  { display: "選挙", correct: "せんきょ", wrong: ["せんぎょ","せんこ"] },
  { display: "投票", correct: "とうひょう", wrong: ["とうびょう","どうひょう"] },
  { display: "代表", correct: "だいひょう", wrong: ["たいひょう","だいびょう"] },

  { display: "国民", correct: "こくみん", wrong: ["こくめん","こくにん"] },
  { display: "市民", correct: "しみん", wrong: ["じみん","しめん"] },
  { display: "住民", correct: "じゅうみん", wrong: ["じゅうめん","しゅうみん"] },
  { display: "地域", correct: "ちいき", wrong: ["ちえき","じいき"] },
  { display: "地方", correct: "ちほう", wrong: ["じほう","ちぼう"] },

  { display: "都市", correct: "とし", wrong: ["どし","とじ"] },
  { display: "農村", correct: "のうそん", wrong: ["のうそ","のうぞん"] },
  { display: "交通", correct: "こうつう", wrong: ["こうづう","こうとう"] },
  { display: "事故", correct: "じこ", wrong: ["しこ","じご"] },
  { display: "災害", correct: "さいがい", wrong: ["ざいがい","さいけい"] },

  { display: "防災", correct: "ぼうさい", wrong: ["ほうさい","ぼうざい"] },
  { display: "救助", correct: "きゅうじょ", wrong: ["きゅうしょ","きゅうじゅ"] },
  { display: "医療", correct: "いりょう", wrong: ["いりょ","いりょう(拗音なし)"] },
  { display: "健康", correct: "けんこう", wrong: ["けんごう","きんこう"] },
  { display: "衛生", correct: "えいせい", wrong: ["えいぜい","えいしょう"] },

  { display: "環境", correct: "かんきょう", wrong: ["かんけい","かんぎょう"] },
  { display: "公害", correct: "こうがい", wrong: ["こうけい","こうが"] },
  { display: "資源", correct: "しげん", wrong: ["しけん","じげん"] },
  { display: "節約", correct: "せつやく", wrong: ["せつしゃく","せちやく"] },
  { display: "再生", correct: "さいせい", wrong: ["ざいせい","さいぜい"] },

  { display: "利用", correct: "りよう", wrong: ["りゆう","りよ"] },
  { display: "使用", correct: "しよう", wrong: ["しゆう","しょよう"] },
  { display: "応用", correct: "おうよう", wrong: ["おうよ","おおよう"] },
  { display: "基礎", correct: "きそ", wrong: ["ぎそ","きぞ"] },
  { display: "基本", correct: "きほん", wrong: ["ぎほん","きぼん"] },

  { display: "発明", correct: "はつめい", wrong: ["はっめい","はつみょう"] },
  { display: "発電", correct: "はつでん", wrong: ["はっでん","はつてん"] },
  { display: "電気", correct: "でんき", wrong: ["てんき","でんぎ"] },
  { display: "電池", correct: "でんち", wrong: ["てんち","でんじ"] },
  { display: "科学", correct: "かがく", wrong: ["かくが","かごく"] },

  { display: "技術", correct: "ぎじゅつ", wrong: ["きじゅつ","ぎじつ"] },
  { display: "機械", correct: "きかい", wrong: ["ぎかい","きがい"] },
  { display: "機能", correct: "きのう", wrong: ["ぎのう","きもう"] },
  { display: "材料", correct: "ざいりょう", wrong: ["さいりょう","ざいよう"] },
  { display: "燃料", correct: "ねんりょう", wrong: ["ねんよう","れんりょう"] },

  { display: "温度", correct: "おんど", wrong: ["おんと","おんとう"] },
  { display: "湿度", correct: "しつど", wrong: ["しつと","しっど"] },
  { display: "気温", correct: "きおん", wrong: ["ぎおん","きおう"] },
  { display: "天気", correct: "てんき", wrong: ["でんき","てんぎ"] },
  { display: "季節", correct: "きせつ", wrong: ["ぎせつ","きぜつ"] },

  { display: "春夏秋冬", correct: "しゅんかしゅうとう", wrong: ["しゅんかしゅとう","しゅんかしゅうと"] },
  { display: "自然", correct: "しぜん", wrong: ["じぜん","しせん"] },
  { display: "動物", correct: "どうぶつ", wrong: ["とうぶつ","どうぶち"] },
  { display: "植物", correct: "しょくぶつ", wrong: ["しょくぶち","そくぶつ"] },
  { display: "生物", correct: "せいぶつ", wrong: ["せいぶち","しょうぶつ"] },

  { display: "体力", correct: "たいりょく", wrong: ["だいりょく","たいりく"] },
  { display: "競技", correct: "きょうぎ", wrong: ["けんぎ","きょうき"] },
  { display: "勝利", correct: "しょうり", wrong: ["じょうり","しょうりょ"] },
  { display: "敗北", correct: "はいぼく", wrong: ["はいほく","ばいぼく"] },
  { display: "記録", correct: "きろく", wrong: ["きろう","きろ"] }
    ];

    /* ===== 設定 ===== */
    var SESSION_COUNT = 10; // ★ランダム10問

    var qText = document.getElementById("qText");
    var toast = document.getElementById("toast");

    var c0 = document.getElementById("c0");
    var c1 = document.getElementById("c1");
    var c2 = document.getElementById("c2");
    var btns = [c0, c1, c2];

    var scoreTxt = document.getElementById("scoreTxt");
    var streakTxt = document.getElementById("streakTxt");
    var lifeTxt = document.getElementById("lifeTxt");
    var progTxt = document.getElementById("progTxt");
    var statusChip = document.getElementById("statusChip");

    var overlay = document.getElementById("overlay");
    var overlayTitle = document.getElementById("overlayTitle");
    var overlayDesc = document.getElementById("overlayDesc");
    var startBtn = document.getElementById("startBtn");

    var pauseBtn = document.getElementById("pauseBtn");
    var resetBtn = document.getElementById("resetBtn");

    var score = 0;
    var streak = 0;
    var life = 3;
    var correctCount = 0;

    var running = false;
    var paused = false;
    var answered = false;

    var correct = "";

    /* ===== util ===== */
    function randInt(n){ return Math.floor(Math.random() * n); }

    function shuffle(arr){
      var a = arr.slice();
      for (var i = a.length - 1; i > 0; i--){
        var j = randInt(i + 1);
        var t = a[i]; a[i] = a[j]; a[j] = t;
      }
      return a;
    }

    function showToast(text, ok){
      toast.textContent = text;
      toast.className = "toast " + (ok ? "ok" : "ng") + " show";
      setTimeout(function(){ toast.className = "toast"; }, 3900);
    }

    function setButtonsEnabled(on){
      for (var i=0;i<btns.length;i++){
        if (on){
          btns[i].className = "choiceBtn";
          btns[i].disabled = false;
        } else {
          btns[i].className = "choiceBtn disabled";
          btns[i].disabled = true;
        }
      }
    }

    // ★長い読みでも見えるように、文字サイズを自動調整
    function fitChoiceFont(btn){
      var s = btn.textContent || "";
      var len = s.length;

      var fs = 34;          // 基本
      if (len >= 10) fs = 20;
      else if (len >= 8) fs = 22;
      else if (len >= 6) fs = 26;
      else if (len >= 5) fs = 30;

      btn.style.fontSize = fs + "px";
    }

    /* ===== 10問セッション（重複なし） ===== */
    var session = [];      // 10問
    var qIndex = 0;        // 0..9

    function buildSession(){
      // QUESTIONSをシャッフルして先頭10個を使う（重複なし）
      var pool = shuffle(QUESTIONS);
      session = pool.slice(0, Math.min(SESSION_COUNT, pool.length));
      qIndex = 0;
    }

    function renderHud(){
      scoreTxt.textContent = String(score);
      streakTxt.textContent = String(streak);
      lifeTxt.textContent = String(life);
      progTxt.textContent = String(Math.min(qIndex, SESSION_COUNT)) + "/" + String(SESSION_COUNT);
      pauseBtn.textContent = paused ? "再開" : "一時停止";
      statusChip.textContent = "出題: ランダム10問";
    }

    function spawn(){
      if (qIndex >= session.length){
        clearGame();
        return;
      }

      var q = session[qIndex];
      correct = q.correct;

      var opts = shuffle([q.correct, q.wrong[0], q.wrong[1]]);

      qText.textContent = q.display;

      c0.textContent = opts[0];
      c1.textContent = opts[1];
      c2.textContent = opts[2];

      fitChoiceFont(c0);
      fitChoiceFont(c1);
      fitChoiceFont(c2);

      answered = false;
      setButtonsEnabled(true);
      renderHud();
    }

    function nextAfter(ms){
      setButtonsEnabled(false);
      setTimeout(function(){
        if (!running) return;
        qIndex += 1;
        spawn();
      }, ms);
    }

    function judge(tapped){
      if (!running || paused || answered) return;
      answered = true;

      if (tapped === correct){
        correctCount += 1;
        streak += 1;
        var gain = 10 + Math.min(20, streak);
        score += gain;
        showToast("正解 +" + gain, true);
      } else {
        streak = 0;
        life -= 1;
        // ★不正解時：正解を表示
        showToast("不正解 -1（正解: " + correct + "）", false);
      }

      renderHud();

      if (life <= 0){
        gameOver();
        return;
      }

      nextAfter(420);
    }

    function start(){
      score = 0;
      streak = 0;
      life = 3;
      correctCount = 0;

      paused = false;
      running = true;

      overlay.style.display = "none";

      buildSession();
      renderHud();
      spawn();
    }

    function clearGame(){
      running = false;
      paused = false;
      setButtonsEnabled(false);

      overlayTitle.textContent = "10問おわり！";
      overlayDesc.innerHTML =
        "正解: <b>" + correctCount + "</b> / " + SESSION_COUNT + "<br/>" +
        "SCORE: <b>" + score + "</b><br/>" +
        "もう一度やる場合は開始を押してください。";
      startBtn.textContent = "もう一度";
      overlay.style.display = "grid";
    }

    function gameOver(){
      running = false;
      paused = false;
      setButtonsEnabled(false);

      overlayTitle.textContent = "ゲームオーバー";
      overlayDesc.innerHTML =
        "正解: <b>" + correctCount + "</b> / " + SESSION_COUNT + "<br/>" +
        "SCORE: <b>" + score + "</b><br/>" +
        "もう一度やる場合は開始を押してください。";
      startBtn.textContent = "もう一度";
      overlay.style.display = "grid";
    }

    function resetAll(){
      running = false;
      paused = false;
      answered = false;
      setButtonsEnabled(false);

      overlayTitle.textContent = "スタート";
      overlayDesc.innerHTML =
        "150問の中からランダムに10問を選んで出題します（10問内は重複しません）。<br/>" +
        "正しい「よみ」をタップしてください（間違いでライフ-1）。";
      startBtn.textContent = "開始";
      overlay.style.display = "grid";

      qText.textContent = "　";
      c0.textContent = "-"; c1.textContent = "-"; c2.textContent = "-";
      c0.style.fontSize = "34px"; c1.style.fontSize = "34px"; c2.style.fontSize = "34px";

      score = 0; streak = 0; life = 3; correctCount = 0;
      session = []; qIndex = 0;

      renderHud();
    }

    /* 入力 */
    c0.addEventListener("click", function(){ judge(c0.textContent); });
    c1.addEventListener("click", function(){ judge(c1.textContent); });
    c2.addEventListener("click", function(){ judge(c2.textContent); });

    pauseBtn.addEventListener("click", function(){
      if (!running) return;
      paused = !paused;
      setButtonsEnabled(!paused && !answered);
      renderHud();
    });

    resetBtn.addEventListener("click", function(){ resetAll(); });
    startBtn.addEventListener("click", function(){ start(); });

    /* 初期化 */
    setButtonsEnabled(false);
    renderHud();
  </script>
</body>
</html>
